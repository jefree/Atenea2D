<html>
<head>
	<meta charset="UTF-8">
	<title>Simple Example with Atenea</title>
</head>
<body>

</body>
<script src="../src/atenea/util.js" type="text/javascript"></script>
<script src="../src/atenea/key.js" type="text/javascript"></script>
<script src="../src/atenea/core.js" type="text/javascript"></script>
<script type="text/javascript">
	
	// init framework
	Atenea.init(400, 400);

	//make models

	Point = {

		init:function(){
			//console.log('new Point');
		},
		
		x:1,
		y:2,
        color: 'red',

		draw : function(canvas){

            canvas.fillStyle = this.color;
			canvas.fillRect(this.x, this. y, 10, 10);
		},

		logic:{

			sensor: {up:'up', m: 'm', k: 'k'},
			controller:{

				jump:{
					sensor:'up, m, k',
					operator:'and',
					actuator:'jump'
				}
			}, 

			actuator:{
                
                jump: function(){ this.color = 'green';}
            }
		}
	}

	Coord = {

		j : 3
	}

	//register models

	Atenea.register('Point', Point);
	Atenea.register('Coord', Coord);

	//expand object
	var p1 = Atenea.parse('Point');

	//make objects from models
	var p2 = Atenea.parse('Coord');

	Atenea.parse('Point', p2);

	//extend logic
	Atenea.logic(p1,{

		sensor:{
            down:'arrow_down-down',
            c1: 'x+j-down'
        },
		controller:{

			hide:{
				sensor:'down, c1',
				operator:'or',
				actuator:'hide'
			}
		},
		actuator:{

            hide: function(){ console.log('Hide !'); }
        }
    });

	//console.log(p1.logic.controller);

	p2.x = 100;
	p2.y = 200;

	console.log(p1.logic.sensor);

	Atenea.register('main', {

		entities : [p1]
	});

	Atenea.start('main');

</script>
</html>